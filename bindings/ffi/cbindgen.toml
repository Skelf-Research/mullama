# cbindgen configuration for mullama-ffi

language = "C"

# Header configuration
header = """
/*
 * Mullama FFI - C API for Mullama LLM Library
 *
 * This header provides the C ABI for integrating Mullama into
 * Node.js, Python, PHP, Go, and other languages.
 *
 * Copyright (c) 2025-2026 Mullama Contributors
 * Licensed under MIT OR Apache-2.0
 */
"""

# After includes - add typedefs for atomic types
after_includes = """
// Atomic bool type for cancellation tokens (implementation detail)
typedef struct { volatile int value; } MullamaAtomicBool;
"""
include_guard = "MULLAMA_FFI_H"
include_version = true
cpp_compat = true
autogen_warning = "/* Warning: this file is autogenerated by cbindgen. Do not modify manually. */"

# Documentation
documentation = true
documentation_style = "c99"

# Style
style = "both"
usize_is_size_t = true

# Enum configuration
[enum]
rename_variants = "ScreamingSnakeCase"
prefix_with_name = true

# Function configuration
[fn]
rename_args = "SnakeCase"
sort_by = "None"

# Struct configuration
[struct]
rename_fields = "SnakeCase"
derive_constructor = false
derive_eq = false

# Export configuration
[export]
prefix = "Mullama"
include = []
exclude = []
item_types = ["enums", "structs", "unions", "typedefs", "opaque", "functions", "constants"]

[export.rename]
"MullamaErrorCode" = "MullamaErrorCode"

# Defines to include
[defines]
"target_os = windows" = "MULLAMA_WINDOWS"
"target_os = macos" = "MULLAMA_MACOS"
"target_os = linux" = "MULLAMA_LINUX"

# Parsing configuration
[parse]
parse_deps = false
include = []
extra_bindings = []

[parse.expand]
crates = []
